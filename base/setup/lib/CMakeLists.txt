
add_definitions(${I18N_DEFS})

include_directories(spapisup utils)

list(APPEND SOURCE
    spapisup/fileqsup.c
    spapisup/infsupp.c
    utils/arcname.c
    utils/bldrsup.c
    utils/filesup.c
    utils/fsrec.c
    utils/genlist.c
    utils/inicache.c
    utils/ntverrsrc.c
    utils/osdetect.c
    utils/partinfo.c
    utils/partlist.c
    utils/regutil.c
    bootcode.c
    bootsup.c
    fsutil.c
    install.c
    mui.c
    registry.c
    settings.c
    setuplib.c
    precomp.h)

add_library(setuplib ${SOURCE})
add_pch(setuplib precomp.h SOURCE)
target_link_libraries(setuplib PUBLIC libmsvcrt)
add_dependencies(setuplib xdk) # psdk

add_library(setuplib_nt ${SOURCE})
add_pch(setuplib_nt precomp.h SOURCE)
target_link_libraries(setuplib_nt PUBLIC ntdll_crt)
add_dependencies(setuplib_nt xdk) # psdk
